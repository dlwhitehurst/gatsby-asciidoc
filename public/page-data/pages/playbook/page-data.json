{"componentChunkName":"component---src-templates-article-js","path":"/pages/playbook/","result":{"data":{"asciidoc":{"html":"<div id=\"toc\" class=\"toc\">\n<div id=\"toctitle\">Table of Contents</div>\n<ul class=\"sectlevel1\">\n<li><a href=\"#_introduction\">1. Introduction</a></li>\n<li><a href=\"#X6\">2. Machines</a>\n<ul class=\"sectlevel2\">\n<li><a href=\"#_physical_machines\">2.1. Physical Machines</a></li>\n<li><a href=\"#X11\">2.2. Virtual</a></li>\n</ul>\n</li>\n<li><a href=\"#_network_and_components\">3. Network and Components</a>\n<ul class=\"sectlevel2\">\n<li><a href=\"#_internet_service_provider\">3.1. Internet Service Provider</a></li>\n<li><a href=\"#_router_and_wap\">3.2. Router and WAP</a></li>\n<li><a href=\"#_network_attached_storage_nas\">3.3. Network Attached Storage (NAS)</a></li>\n<li><a href=\"#_switches\">3.4. Switches</a></li>\n<li><a href=\"#_private_network\">3.5. Private Network</a></li>\n<li><a href=\"#_domain_name_system_dns\">3.6. Domain Name System (DNS)</a></li>\n<li><a href=\"#_security\">3.7. Security</a></li>\n</ul>\n</li>\n<li><a href=\"#_process_and_change_management\">4. Process and Change Management</a>\n<ul class=\"sectlevel2\">\n<li><a href=\"#_configuration_management\">4.1. Configuration Management</a></li>\n<li><a href=\"#_secrets_management\">4.2. Secrets Management</a></li>\n<li><a href=\"#_backups\">4.3. Backups</a></li>\n</ul>\n</li>\n<li><a href=\"#_acronyms\">5. Acronyms</a></li>\n<li><a href=\"#_glossary\">Glossary</a></li>\n<li><a href=\"#_license\">Appendix A: License</a></li>\n</ul>\n</div>\n<div id=\"preamble\">\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p><a href=\"https://site.fortytwobinary.com/\">Site Homepage</a></p>\n</div>\n<div class=\"paragraph\">\n<p><a href=\"https://apache.fortytwobinary.com/lab//welcome.html\">Lab Homepage</a></p>\n</div>\n<div class=\"paragraph\">\n<p><span class=\"image\"><img src=\"images/vy.png\" alt=\"Company Logo\" height=\"32\"></span></p>\n</div>\n<div class=\"paragraph\">\n<p>Welcome to the FortyTwoBinary Network and Infrastructure Playbook. This\ndocument is subject to great change and will be maintained in a software\nrepository <a href=\"https://github.com/fortytwobinary/labdocs\">here</a>.</p>\n</div>\n<div class=\"admonitionblock warning\">\n<table>\n<tr>\n<td class=\"icon\">\n<div class=\"title\">Warning</div>\n</td>\n<td class=\"content\">\nThis playbook was drafted and is maintained as a DevOps reference to the\nwork that occurs on the FortyTwoBinary network and infrastructure. The\npowerful command-line instructions found here, may or may not be accurate\nor timely. This warning is given to let the DevOp be aware that commands\nmay not be idempotent and before root-level (sudo) actions are taken, to\nthink twice before hitting the Enter key.\n</td>\n</tr>\n</table>\n</div>\n<div class=\"sidebarblock\">\n<div class=\"content\">\n<div class=\"title\">This document</div>\n<div class=\"paragraph\">\n<p>This is a large document, but it&#8217;s probably good to keep all of the\nmaterial contained here in one place. A playbook is a powerful reference\nthat can be of great value in the event of data loss, machine crashes,\nbackups, maintenance, installations, and troubleshooting.</p>\n</div>\n</div>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_introduction\">1. Introduction</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>The network and infrastructure playbook is a compilation of the notes,\nconfigurations, how-tos, general, and technical documentation that will\nfollow the evolution of the FortyTwoBinary network. This treatise will\noutline and describe the network, the configurations, the machines,\nand the software the operates over it.</p>\n</div>\n<div class=\"paragraph\">\n<p>The FortyTwoBinary network is an internal network behind a home ISP or\nInternet Service Provider and protected from the public internet via\na secure and highly configured network router.</p>\n</div>\n<div class=\"paragraph\">\n<p>FortyTwoBinary is a made up organization name for our home network and\nused in the event that other people join me in my learning and education.</p>\n</div>\n<div class=\"sidebarblock\">\n<div class=\"content\">\n<div class=\"title\">My Mission</div>\n<div class=\"paragraph\">\n<p>Kubernetes has emerged as powerful way to serve web content and move\ndata over the internet at grand scale. This is very expensive even for\nwell-paid consultants to learn on their own. Small computers and virtual\nmachines are inexpensive and convenient to own. My mission is to learn\nmore about containers, hosting, and clustering all on my own time and\ndo this economically of course.</p>\n</div>\n<div class=\"paragraph\">\n<p>Turing Pi is now making a cluster board for multiple Raspberry Pi boards\nand the cluster capability for up to 28 cores or 7 Raspberry Pi computers.\nCanonical Ubuntu is also producing a software product called MicroK8s or\nwhat they call a no-more, no-less version of Kubernetes that will run on\na single server host. The FortyTwoBinary network (my home network) is\nslowly becoming a laboratory for learning.</p>\n</div>\n</div>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"X6\">2. Machines</h2>\n<div class=\"sectionbody\">\n<div class=\"sect2\">\n<h3 id=\"_physical_machines\">2.1. Physical Machines</h3>\n<div class=\"paragraph\">\n<p>All of my physical machines are described here in the table below. IOT\ndevices are not listed. Only devices capable of providing computing cycles\nand that allow access are noted.</p>\n</div>\n<table class=\"tableblock frame-ends grid-all stretch\">\n<caption class=\"title\">Table 1. Physical computing machines list</caption>\n<colgroup>\n<col style=\"width: 16.6666%;\">\n<col style=\"width: 83.3334%;\">\n</colgroup>\n<thead>\n<tr>\n<th class=\"tableblock halign-left valign-top\">Name</th>\n<th class=\"tableblock halign-left valign-top\">Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\"><em>Macbook Pro</em></p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">My third macbook pro is a 2016, 15-Inch 2.7 GHz Quad-Core Intel Core\ni7 with 16GB of 2133MHz LPDDR3 RAM and a 500GB SSD. Serial Number\nCO2T336TH03Q, OS current version 11.2.1 macOS Big Sur</p></td>\n</tr>\n<tr>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\"><em>Intel NUC</em></p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">This machine has replaced my macbook pro as my day-to-day workstation. Its hostname is <code>quiet-nuc</code>.</p></td>\n</tr>\n<tr>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\"><em>T1-1 kube-worker-3</em></p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">Labist Raspberry Pi 4 Kit model B (192.168.1.19) 8GB RAM Ubuntu 20.04 LTS\non a 32GB microSD card.</p></td>\n</tr>\n<tr>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\"><em>T1-2 kube-master (control-plane)</em></p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">Labist Raspberry Pi 4 Kit model B (192.168.1.12) 8GB RAM Ubuntu 20.04 LTS\non a 32GB microSD card.</p></td>\n</tr>\n<tr>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\"><em>T1-3 kube-worker-4</em></p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">Labist Raspberry Pi 4 Kit model B (192.168.1.14) 8GBRAM Ubuntu 20.04 LTS\non a 32GB microSD card.</p></td>\n</tr>\n<tr>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\"><em>T1-4 kube-worker-2</em></p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">Raspberry Pi 3 Model B (192.168.1.17) 1GB RAM Ubuntu 20.04 LTS\non a 32GB microSD card.</p></td>\n</tr>\n<tr>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\"><em>T1-5 kube-worker-1</em></p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">Raspberry Pi 3 Model B (192.168.1.18) 1GB RAM Ubuntu 20.04 LTS\non a 32GB microSD card.</p></td>\n</tr>\n<tr>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\"><em>T2-1 ns1</em></p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">Octa-core S912 arm64 (192.168.1.20) XGB RAM Armbian\non a XGB microSD card.</p></td>\n</tr>\n<tr>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\"><em>T2-2 ns2</em></p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">Octa-core S912 arm64 (192.168.1.22) XGB RAM Armbian\non a XGB microSD card.</p></td>\n</tr>\n<tr>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\"><em>T2-3 control-1</em></p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">Octa-core S912 arm64 (192.168.1.21) XGB RAM Armbian\non a XGB microSD card.</p></td>\n</tr>\n<tr>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\"><em>vault</em></p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">Octa-core S912 arm64 (192.168.1.??) XGB RAM Armbian\non a XGB microSD card. This machine hosts Hashicorp Vault</p></td>\n</tr>\n</tbody>\n</table>\n</div>\n<div class=\"sect2\">\n<h3 id=\"X11\">2.2. Virtual</h3>\n<div class=\"paragraph\">\n<p>This section describes the virtual machines that participate in the FortyTwoBinary lab\nexperiments. These virtual machines perform some service or function in\nthe overall scheme of getting work done.</p>\n</div>\n<div class=\"ulist\">\n<ul>\n<li>\n<p>None at this time</p>\n</li>\n</ul>\n</div>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_network_and_components\">3. Network and Components</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>There are various components public and private at play on the network that\nsupport and manage data on the fortytwobinary.lab domain proper. These pieces will\nbe described within this section.</p>\n</div>\n<div class=\"sect2\">\n<h3 id=\"_internet_service_provider\">3.1. Internet Service Provider</h3>\n<div class=\"paragraph\">\n<p>Spectrum is our internet service provider (ISP). They provide entry to\nthe world-wide web (WWW) at a public IP address. This\nIP is NOT static. It does however, remain the same for long periods of\ntime but it is not guaranteed to be fixed.</p>\n</div>\n<div class=\"paragraph\">\n<p>Our service enters our house via coaxial cable from the street and\nenters a cable modem before sending ethernet into a Netgear router\nwith network address translation (NAT) from public IP to\n192.168.1.1, All port-forwarding is handled via configuration within\nthe wireless access point (WAP) and router combination.</p>\n</div>\n</div>\n<div class=\"sect2\">\n<h3 id=\"_router_and_wap\">3.2. Router and WAP</h3>\n<div class=\"paragraph\">\n<p>Our router and wireless access point is a Netgear &#8230;&#8203; later</p>\n</div>\n</div>\n<div class=\"sect2\">\n<h3 id=\"_network_attached_storage_nas\">3.3. Network Attached Storage (NAS)</h3>\n<div class=\"paragraph\">\n<p>A G-Technology 500GB external drive is attached to the Kubernetes tower on kube-master for\nshared storage via network file storage or NFS.</p>\n</div>\n</div>\n<div class=\"sect2\">\n<h3 id=\"_switches\">3.4. Switches</h3>\n<div class=\"paragraph\">\n<p>We currently maintain 2 Netgear unmanaged switches for ethernet propagation, one 5-port GS105\nand an 8-port GS-308.</p>\n</div>\n</div>\n<div class=\"sect2\">\n<h3 id=\"_private_network\">3.5. Private Network</h3>\n<div class=\"paragraph\">\n<p>The FortyTwoBinary.lab network is private. This local area network (LAN) begins with a 192.168.1 subnet with 192.168.1.1 being the gateway (through our router) to the public internet (WAN). We (FortyTwoBinary) own the domain fortytwobinary.com and are currently hosting static web sites at <a href=\"https://site.fortytwobinary.com\" class=\"bare\">https://site.fortytwobinary.com</a> and <a href=\"https://apache.fortytwobinary.com\" class=\"bare\">https://apache.fortytwobinary.com</a> . A wiki is also hosted at <a href=\"https://wikijs.fortytwobinary.com\" class=\"bare\">https://wikijs.fortytwobinary.com</a> .</p>\n</div>\n<div class=\"paragraph\">\n<p>A single DNS (Bind9) server hosts forwarding and reverse lookups for the trusted servers configured for use with the fortytwobinary.lab private network.</p>\n</div>\n</div>\n<div class=\"sect2\">\n<h3 id=\"_domain_name_system_dns\">3.6. Domain Name System (DNS)</h3>\n<div class=\"paragraph\">\n<p>The domain name system or DNS is managed using 2 Android TV computers (8-Core) that are part\nof another SBC tower. Aptly named, ns1 and ns2.fortytwobinary.lab, these servers host and\nmaintain (redundant) a Bind9 DNS service to the network.</p>\n</div>\n</div>\n<div class=\"sect2\">\n<h3 id=\"_security\">3.7. Security</h3>\n<div class=\"paragraph\">\n<p>Text</p>\n</div>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_process_and_change_management\">4. Process and Change Management</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>Text</p>\n</div>\n<div class=\"sect2\">\n<h3 id=\"_configuration_management\">4.1. Configuration Management</h3>\n<div class=\"paragraph\">\n<p>Text</p>\n</div>\n</div>\n<div class=\"sect2\">\n<h3 id=\"_secrets_management\">4.2. Secrets Management</h3>\n<div class=\"paragraph\">\n<p>Secrets management for the FortyTwoBinary lab will be handled using Hashicorp Vault. This service is currently running on an unidentified (here) server. Backups are being performed (see below) daily with a Jenkins job. Failure in the system would require the restoration of the vault server (binary) and population on the filesystem with a daily backup tar.</p>\n</div>\n<div class=\"paragraph\">\n<p>Reliability is good because the Vault server is running on a single network server as the only hosted service. The server is dedicated. The unseal keys and root token do not reside on the machine.</p>\n</div>\n</div>\n<div class=\"sect2\">\n<h3 id=\"_backups\">4.3. Backups</h3>\n<div class=\"paragraph\">\n<p>Text</p>\n</div>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_acronyms\">5. Acronyms</h2>\n<div class=\"sectionbody\">\n<div class=\"dlist\">\n<dl>\n<dt class=\"hdlist1\">NAT</dt>\n<dd>\n<p>Network Address Translation</p>\n</dd>\n<dt class=\"hdlist1\">SBC</dt>\n<dd>\n<p>Small board computer</p>\n</dd>\n<dt class=\"hdlist1\">WAP</dt>\n<dd>\n<p>Wireless Access Point</p>\n</dd>\n</dl>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_glossary\">Glossary</h2>\n<div class=\"sectionbody\">\n<div class=\"dlist glossary\">\n<dl>\n<dt><a id=\"X8\"></a> Block element</dt>\n<dd>\n<p>An AsciiDoc block element is a document entity composed of one or\nmore whole lines of text.</p>\n</dd>\n<dt><a id=\"X34\"></a> Inline element</dt>\n<dd>\n<p>AsciiDoc inline elements occur within block element textual\ncontent, they perform formatting and substitution tasks.</p>\n</dd>\n<dt>Formal element</dt>\n<dd>\n<p>An AsciiDoc block element that has a BlockTitle. Formal elements\nare normally listed in front or back matter, for example lists of\ntables, examples and figures.</p>\n</dd>\n<dt>Verbatim element</dt>\n<dd>\n<p>The word verbatim indicates that white space and line breaks in\nthe source document are to be preserved in the output document.</p>\n</dd>\n</dl>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_license\">Appendix A: License</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>This document is licensed by the Apache License version 2.0. Currently,\nthe content in this document is being kept from the public however, in\nthe event the material contained here is willingly shared with\nothers, the license will remain unchanged and will convey with the\ntransference of the material.</p>\n</div>\n<div class=\"paragraph\">\n<p>Apache License\nVersion 2.0, January 2004\n<a href=\"http://www.apache.org/licenses/\" class=\"bare\">http://www.apache.org/licenses/</a></p>\n</div>\n<div class=\"paragraph\">\n<p>A copy has also been provided with this software repository.</p>\n</div>\n<div class=\"paragraph\">\n<p>Copyright &#169; 2021 David L Whitehurst.</p>\n</div>\n</div>\n</div>","document":{"title":"Network and Infrastructure Playbook","subtitle":"","main":"Network and Infrastructure Playbook"},"revision":null,"author":{"fullName":"FortyTwoBinary Team","firstName":"FortyTwoBinary","lastName":"Team","middleName":"","authorInitials":"FT","email":""}}},"pageContext":{"id":"f50e329d-e2f7-5bec-8f35-7763398fa7d1"}},"staticQueryHashes":[]}